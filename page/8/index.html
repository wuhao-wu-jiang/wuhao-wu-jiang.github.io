<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="WOW">
<meta property="og:url" content="http://example.com/page/8/index.html">
<meta property="og:site_name" content="WOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="WOW">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>WOW</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">WOW</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">你生之前悠悠千載已逝<br>未來還會有千年沉寂的期待</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/01/The-Weak-and-Strong-Laws-of-Large-Numbers-for-Rademacher/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WOW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/01/The-Weak-and-Strong-Laws-of-Large-Numbers-for-Rademacher/" class="post-title-link" itemprop="url">The Weak and Strong Laws of Large Numbers For Rademacher</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-09-01 08:48:05 / Modified: 11:10:30" itemprop="dateCreated datePublished" datetime="2021-09-01T08:48:05+10:00">2021-09-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Let <span class="math inline">\(\pmb X = (X_1, X_2, X_3, \ldots)\)</span> be a countable sequence of independent Rademacher random variables. For each <span class="math inline">\(n \in \mathbb{N}_+\)</span>, denote <span class="math inline">\(S_n = \sum_{i \in [n] } X_i\)</span>.</p>
<blockquote>
<p><strong>Weak Law of Large Numbers.</strong> <span class="math inline">\(\forall \epsilon &gt; 0\)</span>, it holds that <span class="math display">\[
\lim_{n } \Pr \left[ \left| \frac{1}{n} \cdot S_n \right| \ge \epsilon \right] = 0.
\]</span></p>
</blockquote>
<p><strong>Proof.</strong> Via Hoeffding's inequality, we have <span class="math display">\[
    \Pr \left[ \left| \frac{1}{n} \cdot S_n \right| \ge \epsilon \right] \le \exp \left( - \frac{n \cdot \epsilon^2 }{ 2 } \right).
\]</span> Letting <span class="math inline">\(n \rightarrow \infty\)</span>, the right hand side converges to <span class="math inline">\(0\)</span>.</p>
<p><span class="math inline">\(\square\)</span></p>
<blockquote>
<p><strong>Strong Law of Large Numbers.</strong> Let <span class="math display">\[
A \doteq \left\{ \pmb x \in \{-1, 1\}^{ \mathbb{N} } : \lim_n \left( \frac{1}{n} \sum_{i \in [n] } x_i \right) = 0 \right\}
\]</span> be the set consisting of those <span class="math inline">\(\pmb x\)</span> whose partial sums converges to 0. Then <span class="math display">\[
\Pr[ \pmb X \in A] = 1. 
\]</span></p>
</blockquote>
<p><strong>Proof.</strong> For each <span class="math inline">\(n \ge 2\)</span>, let <span class="math inline">\(\epsilon_n = 2 \cdot \sqrt{(\ln n) / n}\)</span>, and define the set <span class="math display">\[
    B_n \doteq \left\{ \pmb x \in \{-1, 1\}^{ \mathbb{N} } : \left| \frac{1}{n} \sum_{i \in [n] } x_i \right| \ge \epsilon_n \right\}.
\]</span> Via Hoeffding's inequality, we see that <span class="math display">\[
    \Pr[ X \in B_n ] \le \frac{1}{n^2}.
\]</span></p>
<p>Let <span class="math inline">\(C_k \doteq \cup_{n \ge k} B_k\)</span>. For each <span class="math inline">\(\pmb x \in \bar A\)</span>, <span class="math inline">\(\exists \epsilon &gt; 0\)</span>, s.t., <span class="math display">\[
    \pmb x \in 
    \left( \cap_{k \ge 1} \cup_{n \ge k} \left\{ \pmb x \in \{-1, 1\}^{ \mathbb{N} } : \left| \frac{1}{n} \sum_{i \in [n] } x_i \right| \ge \epsilon \right\} \right) 
    \subset \Big( \cap_{ k \ge 2 } C_k \Big).
\]</span></p>
<p>It follows that <span class="math inline">\(\bar A \subset \Big( \cap_{k \ge 2} C_k \Big)= \lim_k C_k\)</span>. Further, for each <span class="math inline">\(k \ge 2\)</span>, <span class="math display">\[
    \Pr[ X \in C_k ] \le \sum_{n \ge k} \Pr[ X \in B_n] \le \frac{1}{k}. 
\]</span></p>
<p>Hence, <span class="math display">\[
    \Pr[ X \in \lim_k C_k ] = \lim_k \Pr [ X \in C_k ] = 0.
\]</span></p>
<p><span class="math inline">\(\square\)</span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/21/Expectation-with-Hoeffding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WOW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/21/Expectation-with-Hoeffding/" class="post-title-link" itemprop="url">Expectation with Hoeffding</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-08-21 21:49:22" itemprop="dateCreated datePublished" datetime="2021-08-21T21:49:22+10:00">2021-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-09-22 17:07:33" itemprop="dateModified" datetime="2021-09-22T17:07:33+10:00">2021-09-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Let <span class="math inline">\(X\)</span> be a non-negative random variable such that <span class="math inline">\(\forall t \ge 0\)</span>, <span class="math display">\[
    \begin{aligned}
        \Pr[ X \ge t] 
            \le \exp \left( - 2 n t^2 \right). 
    \end{aligned}
\]</span></p>
<p>Then <span class="math display">\[
    \begin{aligned}
        \mathbb{E}[ X ] 
            &amp;= \int_{0}^\infty \Pr[ X \ge t] \, dt \\
            &amp;\le \int_{0}^\infty \exp \left( - 2 n t^2 \right)  \, dt \\
            &amp;= \sigma \sqrt{2 \pi} \cdot \frac{1}{ \sigma \sqrt{2 \pi} }\int_{0}^\infty \exp \left( - \frac{t^2 }{ 2 \sigma^2 } \right)  \, dt &amp; \sigma \doteq \sqrt{ \frac{1}{4n} } \\
            &amp;= \frac{\sigma \sqrt{2 \pi} }{ 2 }\cdot \frac{1}{ \sigma \sqrt{2 \pi} }\int_{ - \infty }^\infty \exp \left( - \frac{t^2 }{ 2 \sigma^2 } \right)  \, dt \\
            &amp;= \frac{1}{2} \cdot \sqrt{ \frac{ \pi }{ 2n } }.
    \end{aligned}
\]</span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/29/KLL-Sketch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WOW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/29/KLL-Sketch/" class="post-title-link" itemprop="url">KLL Sketch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-29 15:18:33" itemprop="dateCreated datePublished" datetime="2021-07-29T15:18:33+10:00">2021-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-02 21:16:44" itemprop="dateModified" datetime="2021-11-02T21:16:44+11:00">2021-11-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="problem">Problem</h1>
<p>Let <span class="math inline">\(\mathcal{D}\)</span> be an order domain with size <span class="math inline">\(d\)</span>, and <span class="math inline">\(f = (0, \ldots, 0) \in \mathbb{N}^d\)</span> be the frequency vector initialized with all zeros. Suppose that there is a stream <span class="math inline">\(S\)</span> of <span class="math inline">\(n\)</span> elements updating <span class="math inline">\(f\)</span> as follows:</p>
<blockquote>
<p><strong>For</strong> each <span class="math inline">\(x \in S\)</span> <strong>do</strong><br />
<span class="math inline">\(\qquad\)</span> <span class="math inline">\(f[x] \leftarrow f[x] + 1\)</span>.</p>
</blockquote>
<p>When all updates in <span class="math inline">\(S\)</span> have arrived, we have that <span class="math inline">\(|S| = \Vert f \Vert_1 = n\)</span>.</p>
<p>We study the <em>ranks</em> of elements in <span class="math inline">\(\mathcal{D}\)</span>.</p>
<blockquote>
<p><strong>Definition.</strong> For <span class="math inline">\(x \in \mathcal{D}\)</span>, define the rank <span class="math inline">\(r(x)\)</span> of <span class="math inline">\(x\)</span> to as <span class="math display">\[
r(x) \doteq \sum_{y &lt; x} f[y]. 
\]</span></p>
</blockquote>
<blockquote>
<p><strong>Approximate Rank Query.</strong> Given a parameter <span class="math inline">\(\epsilon \in (0, 1)\)</span>, design a data structure which, for each <span class="math inline">\(x \in \mathcal{D}\)</span>, outputs an estimate <span class="math inline">\(\hat r(x)\)</span> of <span class="math inline">\(r(x)\)</span>, such that <span class="math display">\[
r(x) - \epsilon \Vert f \Vert_1 \le \hat r(x) \le r(x) + \epsilon \Vert f \Vert_1.
\]</span></p>
</blockquote>
<h1 id="mrl-sketch">MRL Sketch</h1>
<blockquote>
<p><strong>Theorem (MRL Sketch).</strong> If the size of the stream <span class="math inline">\(|S| = n\)</span> is given in advance, the MRL Sketch solves the approximate rank query with space usage <span class="math display">\[
O \left( \epsilon^{-1} \log^2 (\epsilon n) \right).
\]</span></p>
</blockquote>
<h2 id="structure">Structure</h2>
<p>The structure of the algorithm comprises a sequence of <span class="math inline">\(L + 1\)</span> arrays <span class="math inline">\(A_0, \ldots A_L\)</span>, each of size <span class="math display">\[
    k \doteq \lceil \epsilon^{-1} \big( 1 + \log ( \epsilon n ) \big)\rceil_{even}
\]</span> where <span class="math inline">\(\lceil \cdot \rceil_{even}\)</span> is the operation of rounding a real number up to nearest even integer.</p>
<p>It sets <span class="math inline">\(L\)</span>, the largest index of the arrays, to <span class="math inline">\(\lceil \log (n / k) \rceil\)</span>. Therefore, <span class="math display">\[ 
    \begin{aligned}
        \frac{L}{k} 
            \le \frac{ \lceil \log (\epsilon n) \rceil }{ \epsilon^{-1} \big( 1 + \log ( \epsilon n )  \big) } 
            \le \frac{  1 + \log ( \epsilon n) }{ \epsilon^{-1} \big( 1 + \log (\epsilon n) \big) } 
            \le \epsilon.
    \end{aligned}
\]</span></p>
<div style="text-align:center">
<p><img src="https://github.com/wuhao-wu-jiang/BlogImgs/blob/master/KLL-Sketch/MRL.png?raw=true" width="450" height="200"/></p>
</div>
<h2 id="insertion">Insertion</h2>
<p>The MRL sketch processes an insertion as follows.</p>
<blockquote>
<p><strong>Insert:</strong> <span class="math inline">\(x \in \mathcal{D}\)</span>.<br />
1. Insert <span class="math inline">\(x\)</span> into <span class="math inline">\(A_0\)</span>;<br />
2. <strong>COMPRESS.</strong></p>
</blockquote>
<p>The algorithm <strong>COMPRESS</strong> inspects the arrays <span class="math inline">\(A_0, \ldots, A_{L - 1}\)</span> in increasing order. If an array <span class="math inline">\(A_i\)</span>, reaches its capacity, the algorithm performs a <em>compaction</em> on <span class="math inline">\(A_i\)</span>. In particular, it moves the odd-indexed elements of <span class="math inline">\(A_i\)</span> to <span class="math inline">\(A_{i + 1}\)</span>, and then reset <span class="math inline">\(A_i\)</span> to empty (by deleting all its elements). This may cause <span class="math inline">\(A_{i + 1}\)</span> to research its capacity, and trigger a sequence of compactions.</p>
<blockquote>
<p><strong>COMPRESS.</strong><br />
1. <span class="math inline">\(i \leftarrow 0\)</span>;<br />
2. <strong>while</strong> <span class="math inline">\(i &lt; L\)</span> and <span class="math inline">\(|A_i| = k:\)</span> // no empty buckets<br />
3. <span class="math inline">\(\qquad\)</span> Sort <span class="math inline">\(A_i\)</span> in increasing order.<br />
4. <span class="math inline">\(\qquad\)</span> Move <span class="math inline">\(A_i[1], A_i[3], \ldots, A_i[k - 1]\)</span> into <span class="math inline">\(A_{i + 1}\)</span><br />
5. <span class="math inline">\(\qquad\)</span> Delete all elements in <span class="math inline">\(A_i\)</span><br />
6. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(i \leftarrow i + 1\)</span>.</p>
</blockquote>
<p>Suppose that each elements in array <span class="math inline">\(A_i\)</span> (<span class="math inline">\(0 \le i \le L\)</span>) is associated with weight <span class="math inline">\(w_i = 2^i\)</span>. It is easy to prove, by induction on the size of <span class="math inline">\(n\)</span>, and on the number of inductions performed, the following invariant</p>
<blockquote>
<p><strong><em>Invariant</em></strong>. For <span class="math inline">\(0 \le i \le L\)</span>, define <span class="math inline">\(w_i = 2^i\)</span>. Then <span class="math display">\[
  \sum_{ i = 0}^L w_i \cdot |A_i| = n.
\]</span></p>
</blockquote>
<p>Therefore, <span class="math inline">\(2^L |A_L| = 2^{ \lceil \log (n / k) \rceil } \cdot |A_L| \le n\)</span>. Therefore, <span class="math inline">\(|A_L| \le k\)</span> and <span class="math inline">\(A_L\)</span> will never exceed its capacity.</p>
<p><strong>Interpretation of Weights</strong></p>
<p>The weights have another interpretation. Suppose that we associate each element inserted into <span class="math inline">\(A_0\)</span> with a set, which contains only the element itself. We will maintain these sets, such that</p>
<blockquote>
<p>For each <span class="math inline">\(0 \le i \le L\)</span>, and each <span class="math inline">\(v \in A_i\)</span>, the set associated with <span class="math inline">\(v\)</span> has size <span class="math inline">\(w_i\)</span>, and <span class="math inline">\(v\)</span> is the only element in the set that is kept in the arrays. Further, the sets associated with different elements in the arrays are disjoint.</p>
</blockquote>
<p>Clearly this holds when an element is inserted into <span class="math inline">\(A_0\)</span>. Now, suppose we are going to perform a <em>compaction</em> at an array <span class="math inline">\(A_i\)</span>, for some <span class="math inline">\(0 \le i &lt; L\)</span>. We delete half of the elements in <span class="math inline">\(A_i\)</span>, and keep the rest of the elements. We can pair up the elements deleted and the ones kept one by one, and merge their associated sets. For each merged set, it contains <span class="math inline">\(w_{i + 1}\)</span> elements, and only one element in the merge set is kept in the arrays. Hence, we can associate it with the only element kept.</p>
<p>The above discussion gives a new interpretation of the weights.</p>
<blockquote>
<p>If an element is associated with weight <span class="math inline">\(w_i\)</span>, it represents <span class="math inline">\(w_i\)</span> unique elements in the original stream.</p>
</blockquote>
<h2 id="query">Query</h2>
<blockquote>
<p><strong>Definition.</strong> For each <span class="math inline">\(i \in \{0, \ldots, L \}\)</span>, and <span class="math inline">\(x \in \mathcal{D}\)</span>, let <span class="math inline">\(r(x, A_i)\)</span> be the rank of <span class="math inline">\(x\)</span> in <span class="math inline">\(A_i\)</span>, defined as <span class="math display">\[
r(x, A_i) \doteq | \{ y \in A_i : y &lt; x \} |, 
\]</span> which is the number of elements in <span class="math inline">\(A_i\)</span> that is strictly less than <span class="math inline">\(x\)</span>.</p>
</blockquote>
<p>Given <span class="math inline">\(x \in D\)</span>, the MRL sketch returns an weighted sum of the ranks <span class="math inline">\(r(x, A_i)\)</span>, as an estimate of <span class="math inline">\(r(x)\)</span>: <span class="math display">\[
    \hat r(x) = \sum_{i = 0}^{L} w_i \cdot r(x, A_i).
\]</span></p>
<blockquote>
<p><strong>Rank:</strong> <span class="math inline">\(x \in \mathcal{D}\)</span><br />
1. <span class="math inline">\(\hat r(x) \leftarrow 0\)</span>;<br />
2. <strong>For</strong> <span class="math inline">\(i \leftarrow 0\)</span> to <span class="math inline">\(L\)</span> <strong>do</strong><br />
3. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\hat r(x) \leftarrow \hat r(x) + w_i \cdot r(x, A_i)\)</span>.</p>
</blockquote>
<h2 id="error-analysis">Error Analysis</h2>
<p>Now we analyze the approximation error of <span class="math inline">\(\hat r(x)\)</span>.</p>
<p>We illustrate the key idea of the analysis via an example. In the figure below, <span class="math inline">\(k = 4\)</span>. Before the <em>compaction</em>, <span class="math inline">\(A_5\)</span> contributes <span class="math inline">\(2^5 \cdot r(4, A_5) = 2^5 \cdot 2\)</span> to the estimation of <span class="math inline">\(\hat r(4)\)</span>, and <span class="math inline">\(2^5 \cdot r(9, A_5) = 2^5 \cdot 3\)</span> to the estimation of <span class="math inline">\(\hat r(9)\)</span>.</p>
<p>The <em>compaction</em> moves elements in the odd positions of <span class="math inline">\(A_5\)</span>, namely <span class="math inline">\(3\)</span> and <span class="math inline">\(10\)</span>, to <span class="math inline">\(A_6\)</span>. Then it deletes all elements in <span class="math inline">\(A_5\)</span>.</p>
<p>After the <em>compaction</em>, <span class="math inline">\(A_6\)</span> contributes <span class="math inline">\(2^6 \cdot r(4, A_6) = 2^6 \cdot 1\)</span> to the estimation of <span class="math inline">\(\hat r(4)\)</span>, and <span class="math inline">\(2^6 \cdot r(9, A_6) = 2^6 \cdot 1\)</span> to the estimation of <span class="math inline">\(\hat r(9)\)</span>.</p>
<p>There is no error incurred to the estimation of <span class="math inline">\(\hat r(4)\)</span> at this compaction step, while the estimation error incurred to <span class="math inline">\(\hat r(9)\)</span> is <span class="math inline">\(-2^5\)</span> at this compaction step.</p>
<div style="text-align:center">
<p><img src="https://github.com/wuhao-wu-jiang/BlogImgs/blob/master/KLL-Sketch/MRL-Compaction.png?raw=true" width="550" height="200" /></p>
</div>
<p>The above discussion leads to the following observations.</p>
<blockquote>
<p><strong>Observation.</strong> Let <span class="math inline">\(x \in \mathcal{D}\)</span> and <span class="math inline">\(0 \le i &lt; L\)</span>. Denote <span class="math inline">\(A_i, A_{i + 1}\)</span> the arrays before the compaction and <span class="math inline">\(A_i&#39;, A_{i + 1}&#39;\)</span> the ones after. 1. If <span class="math inline">\(r(x, A_i)\)</span> is even, then <span class="math display">\[
w_{i + 1} \cdot r(x, A_{i + 1}&#39; ) = w_{i + 1} \cdot r(x, A_{i + 1} ) + w_{i} \cdot  r(x, A_i),
      \]</span> which implies that the <em>compaction</em> at <span class="math inline">\(A_i\)</span> incurs no error to the estimation of <span class="math inline">\(r(x)\)</span>.</p>
<ol start="2" type="1">
<li>If <span class="math inline">\(r(x, A_i)\)</span> is odd, then <span class="math display">\[
w_{i + 1} \cdot r(x, A_{i + 1}&#39; ) + w_i = w_{i + 1} \cdot r(x, A_{i + 1} ) + w_{i} \cdot  r(x, A_i).
   \]</span> which implies that the <em>compaction</em> at <span class="math inline">\(A_i\)</span> incurs an error of <span class="math inline">\(-2^i\)</span> to the estimation of <span class="math inline">\(r(x)\)</span>.</li>
</ol>
</blockquote>
<p>Let <span class="math inline">\(m_i\)</span> be the number of <em>compactions</em> performed at <span class="math inline">\(A_i\)</span>. For each <span class="math inline">\(j &lt; i\)</span>, each <em>compaction</em> at <span class="math inline">\(A_j\)</span> discards <span class="math inline">\(k / 2\)</span> elements and transfers only <span class="math inline">\(k / 2\)</span> elements to <span class="math inline">\(A_{j + 1}\)</span>. Therefore, the number of elements that have ever been inserted into <span class="math inline">\(A_i\)</span> is bounded by <span class="math inline">\(n / 2^i\)</span>, and <span class="math inline">\(m_i\)</span> is bounded by <span class="math display">\[
    m_i \le \frac{n}{ 2^i \cdot k}.
\]</span></p>
<p>Given <span class="math inline">\(x \in \mathcal{D}\)</span>, let <span class="math inline">\(\eta_{i, t}\)</span> be the parity of <span class="math inline">\(r(x, A_i)\)</span> just before the <span class="math inline">\(t^{(th)}\)</span> <em>compaction</em> is performed on <span class="math inline">\(A_i\)</span>. The estimation error <span class="math inline">\(\mathbb{Err}(x)\)</span> is given by <span class="math display">\[
    \begin{aligned}
        \mathbb{Err}(x)
            &amp;=  r(x) - \hat r(x) \\
            &amp;= \sum_{i = 0}^{L - 1} \sum_{t \in [m_i] } \eta_{i, t} \cdot 2^i \\
            &amp;\le \sum_{i = 0}^{L - 1} \frac{n}{2^i \cdot k} \cdot 2^i \\
            &amp;= \frac{n \cdot L}{k} \\
            &amp;\le \epsilon n.
    \end{aligned}
\]</span></p>
<p>The last inequality follows from that <span class="math inline">\(L / k \le \epsilon\)</span>.</p>
<h1 id="basic-kll-sketch">Basic KLL Sketch</h1>
<p>In this section, we reduce the space usage from <span class="math inline">\(O \left( \epsilon^{-1} \cdot \log^2 (\epsilon n) \right)\)</span> to <span class="math display">\[
    O \left( \epsilon^{-1} \cdot \sqrt{ \ln (1 / \delta) } \cdot \log \frac{ \epsilon n }{ \sqrt{ \log (1 / \delta) } } \right).
\]</span></p>
<p>The algorithm is a randomized one and has failure probability <span class="math inline">\(\delta\)</span>.</p>
<p>The algorithm is similar to the MRL sketch, but sets <span class="math inline">\(k = 2 / \epsilon \cdot \sqrt{ \ln 2 / \delta }\)</span> and <span class="math inline">\(L = \lceil \log (n / k) \rceil\)</span> to achieve the space usage stated above. Besides, the <em>compaction</em> step is different.</p>
<h2 id="random-parity">Random Parity</h2>
<p>Instead of always moving the odd-indexed elements to the next array, it chooses uniformly at random either the odd-indexed elements, or even-indexed elements. In particular, it replaces the line 4 of the <strong>COMPRESS</strong> algorithm with the following lines:</p>
<blockquote>
<ol type="1">
<li>Flip an unbiased coin;<br />
</li>
<li>If the coin turns out head:<br />
</li>
<li><span class="math inline">\(\qquad\)</span> Move <span class="math inline">\(A_i[1], A_i[3], \ldots, A_i[k - 1]\)</span> into <span class="math inline">\(A_{i + 1}\)</span>;</li>
<li>Else:</li>
<li><span class="math inline">\(\qquad\)</span> Move <span class="math inline">\(A_i[0], A_i[2], \ldots, A_i[k - 2]\)</span> into <span class="math inline">\(A_{i + 1}\)</span>;</li>
</ol>
</blockquote>
<h2 id="unbiased-estimation">Unbiased Estimation</h2>
<p>For each <span class="math inline">\(x \in \mathcal{D}\)</span> and <span class="math inline">\(0 \le i &lt; L\)</span>, if <span class="math inline">\(r(x, A_i)\)</span> is even, then there is no error introduced after the compaction on <span class="math inline">\(A_i\)</span>. If <span class="math inline">\(r(x, A_i)\)</span> is odd, then the error introduced is either <span class="math inline">\(2^i\)</span> or <span class="math inline">\(-2^i\)</span>, both with probability <span class="math inline">\(1 / 2\)</span>. Hence, the expected error is always <span class="math inline">\(0\)</span>.</p>
<p>The estimation error <span class="math inline">\(\mathbb{Err}(x)\)</span> is given by <span class="math display">\[
    \begin{aligned}
        \mathbb{Err}(x)
            &amp;= \sum_{i = 0}^{L - 1} \sum_{t \in [m_i] } \eta_{i, t} \cdot \sigma_{i, t} \cdot 2^i,
    \end{aligned}
\]</span></p>
<p>where <span class="math inline">\(\sigma_{i, t} \in \{-1, 1\}\)</span> are Rademacher random variables.</p>
<p>Clearly, we have that <span class="math display">\[
    \begin{aligned}
        \mathbb{E} \left[ \mathbb{Err}(x) \right] = 0.
    \end{aligned}
\]</span></p>
<h2 id="confidence-interval-of-the-estimation-error">Confidence Interval of the Estimation Error</h2>
<p>However, the random variables <span class="math inline">\(\eta_{i, t} \cdot \sigma_{i, t} \cdot 2^i\)</span> are not independent, as the values of <span class="math inline">\(\eta_{i, t}\)</span> depends on previous compressions.</p>
<p>Instead of using the Hoeffding's inequality for independent random variables, we resort to a martingale concentration inequality.</p>
<h3 id="martingale-difference-sequence"><em>Martingale Difference Sequence</em></h3>
<p>Let <span class="math inline">\(m = \sum_{ i = 0}^{L - 1} m_i\)</span> be the total number of compaction at the arrays. For fixed <span class="math inline">\(n\)</span> and <span class="math inline">\(k\)</span>, <span class="math inline">\(m\)</span> is a deterministic number (even without knowing the elements in <span class="math inline">\(S\)</span>). Further, for each <span class="math inline">\(t \in [m]\)</span>, the array at which the <span class="math inline">\(t\)</span>-th compaction is performed is also deterministic. Denote <span class="math inline">\(a_t \in [0, \ldots, L - 1]\)</span> the index of the corresponding array, and let <span class="math inline">\(c_t \doteq 2^{ a_t }\)</span>, which is a deterministic number since <span class="math inline">\(a_t\)</span> is deterministic. It holds that <span class="math display">\[
    \sum_{t \in [m] } c_t^2 = \sum_{i = 0}^{L - 1} \sum_{t \in [m_i] } \big( 2^i \big)^2 \le \sum_{i = 0}^{L - 1}  \frac{n}{2^i \cdot k} \cdot \big( 2^i \big)^2 \le \frac{n}{k} \cdot 2^L \le 2 \cdot \left( \frac{n}{k} \right)^2.
\]</span> The last inequality follows since <span class="math inline">\(L = \lceil \log (n / k) \rceil\)</span>.</p>
<p>For each <span class="math inline">\(t \in [m]\)</span>, define the random variable <span class="math inline">\(X_t \in \{-c_t, 0, c_t\}\)</span>, such that</p>
<ol type="1">
<li>If <span class="math inline">\(rank(x, A_{a_t})\)</span> is even, then <span class="math inline">\(\Pr[ X_t = 0] = 1\)</span>.<br />
</li>
<li>If <span class="math inline">\(rank(x, A_{a_t})\)</span> is odd, then <span class="math inline">\(\Pr[ X_t = -c_t ] = \Pr[ X_t = c_t ] = 1 / 2\)</span></li>
</ol>
<p>The <span class="math inline">\(X_t\)</span> are not independent random variables, since for <span class="math inline">\(t &gt; 1\)</span>, when the <span class="math inline">\(t\)</span>-th compaction happens at the <span class="math inline">\(a_t\)</span>-th array <span class="math inline">\(A_{a_t}\)</span>, the rank of <span class="math inline">\(x\)</span> at this array depends on the previous compressions. However, the conditional expectation of <span class="math inline">\(X_t\)</span> is always <span class="math inline">\(0\)</span>: <span class="math display">\[
    \mathbb{E} [ X_t \mid X_{t - 1}, \ldots, X_1 ] = 0.
\]</span></p>
<p>Hence, <span class="math inline">\(X_1, \ldots, X_m\)</span> is a martingale difference sequence.</p>
<blockquote>
<p><strong>Theorem.([1])</strong> Let <span class="math inline">\(c_1, \ldots, c_m\)</span> be constants, and let <span class="math inline">\(X_1, \ldots, X_m\)</span> be a <em>martingale difference</em> sequence with <span class="math inline">\(|X_t| \le c_t\)</span> for each <span class="math inline">\(t\)</span>. Then for any <span class="math inline">\(\lambda \ge 0\)</span>, <span class="math display">\[ 
{ \small
\Pr \left[ \left| \sum_{t \in [m] } X_t \right| \ge \lambda \right] \le 2 \cdot \exp \left( - \frac{ \lambda^2 }{ 2 \cdot \sum_{ t \in [m] } c_t^2 }\right). 
}
\]</span></p>
</blockquote>
<h3 id="choosing-k"><em>Choosing <span class="math inline">\(k\)</span></em></h3>
<p>It follows that with probability at least <span class="math inline">\(1 - \delta\)</span>, it holds that <span class="math display">\[
    \left| \sum_{t \in [m] } X_t \right| \le \sqrt{ 2 \cdot \left( \sum_{t \in [m] } c_t^2 \right) \cdot \ln \frac{2}{\delta } } \le \sqrt{ 2 \cdot \frac{n}{k} \cdot 2^L \cdot \ln \frac{2}{\delta } } \le 2 \cdot \sqrt{ \left( \frac{n}{k} \right)^2 \cdot \ln \frac{2}{\delta } } 
\]</span></p>
<p>Setting <span class="math inline">\(k = \Big\lceil 2 / \epsilon \cdot \sqrt{ \ln 2 / \delta } \Big\rceil_{even}\)</span>, this error is bounded by <span class="math inline">\(\epsilon \cdot n\)</span>.</p>
<p>The total space usage is therefore <span class="math display">\[
    k \cdot L \in O \left( k \cdot \log \frac{n}{k} \right) \subset O \left( \frac{1}{\epsilon} \cdot \sqrt{ \ln \frac{1}{\delta} } \cdot \log \frac{\epsilon \cdot n }{ \sqrt{ \ln 1 / \delta } } \right).
\]</span></p>
<p><strong>Remark.</strong> It is kind of amazing that the size of <span class="math inline">\(k\)</span> does not depends on <span class="math inline">\(n\)</span>. On the other hand, even though the size of <span class="math inline">\(L\)</span> depends on <span class="math inline">\(n\)</span>, we can still apply the algorithm when we don't know the value of <span class="math inline">\(n\)</span> in advance. We can create new arrays on the fly. In particular, if the array with the largest index exceeds its capacity, we perform <em>compaction</em> at it and create a new array. Note the we don't perform <em>compaction</em> at that array, when it reaches its capacity. The entire analysis still holds.</p>
<h1 id="improved-kll-sketch">Improved KLL Sketch</h1>
<p>In this section, we improve the space usage to <span class="math display">\[
    O \left( \frac{1}{\epsilon} \cdot \sqrt{ \ln \frac{1}{\delta} } + \log \frac{\epsilon \cdot n }{ \sqrt{ \ln 1 / \delta } } \right).
\]</span></p>
<p>Compared to the basic KLL, the improved algorithm allows the capacities of the arrays to vary. Denote the largest index of the arrays as <span class="math inline">\(L\)</span>. It and maintains the following invariant:</p>
<ul>
<li>For each <span class="math inline">\(0 \le i \le L\)</span>, the array <span class="math inline">\(A_{L - i}\)</span> has capacity <span class="math inline">\(\lceil \alpha^i \cdot k \rceil_{even}\)</span>, where <span class="math inline">\(\alpha \in (0.5, 1)\)</span> is a parameter chosen by the algorithm.</li>
</ul>
<p>The algorithm sets <span class="math inline">\(k = \Big\lceil 2 / \epsilon \cdot \sqrt{ 1 / (2 \alpha - 1 ) \cdot \ln 2 / \delta } \Big\rceil_{even}\)</span>. When <span class="math inline">\(n\)</span> elements arrive, at least one <em>compaction</em> is performed at <span class="math inline">\(A_{L - 1}\)</span>, as otherwise <span class="math inline">\(A_L\)</span> would be not created. When the first <em>compaction</em> is performed at <span class="math inline">\(A_{L - 1}\)</span>, it has capacity <span class="math inline">\(k\)</span>. As each element in <span class="math inline">\(A_{L - 1}\)</span> represents <span class="math inline">\(2^{L - 1}\)</span> unique elements in the original stream,<br />
<span class="math display">\[
    k \cdot 2^{L - 1} \le n \implies 2^{L - 1} \le \frac{n}{k},\, \text{and }\, L \le \left\lceil 2 \log \frac{n}{k} \right\rceil.
\]</span></p>
<p>It follows that the total space usage is bounded by <span class="math display">\[
    k \cdot \sum_{ i \ge 0} \alpha^i + 2 \cdot L
    \in 
    O \left( \frac{1}{\epsilon} \cdot \frac{1}{1 - \alpha}\cdot \sqrt{ \frac{1}{2 \alpha - 1} \cdot  \ln \frac{1}{\delta} } + \log \frac{\epsilon \cdot n \cdot \sqrt{2 \alpha - 1} }{ \sqrt{ \ln 1 / \delta } } \right).
\]</span></p>
<p>If we set, e.g., <span class="math inline">\(\alpha = 2 / 3\)</span>, then this is <span class="math display">\[
    O \left( \frac{1}{\epsilon} \cdot \sqrt{ \ln \frac{1}{\delta} } + \log \frac{\epsilon \cdot n }{ \sqrt{ \ln 1 / \delta } } \right).
\]</span></p>
<h2 id="algorithm">Algorithm</h2>
<p>Initially, <span class="math inline">\(L = 0\)</span> and the algorithm creates a single array <span class="math inline">\(A_0\)</span> with capacity <span class="math inline">\(k\)</span>. When <span class="math inline">\(A_L\)</span> reaches or exceeds its capacity, the algorithm increases <span class="math inline">\(L\)</span> and creates a new array. The new algorithm <strong>COMPRESS</strong> is as follows.</p>
<blockquote>
<p><strong>COMPRESS.</strong><br />
1. <span class="math inline">\(i \leftarrow 0\)</span><br />
2. <strong>while</strong> <span class="math inline">\(|A_i| \ge \lceil \alpha^{L - i} \cdot k \rceil_{even}\)</span> // no empty buckets<br />
3. <span class="math inline">\(\qquad\)</span> <strong>If</strong> <span class="math inline">\(i = L\)</span> <strong>then</strong><br />
4. <span class="math inline">\(\qquad\qquad\)</span> <span class="math inline">\(L \leftarrow L + 1\)</span><br />
5. <span class="math inline">\(\qquad\qquad\)</span> Create a new array <span class="math inline">\(A_L\)</span><br />
6. <span class="math inline">\(\qquad\)</span> Sort <span class="math inline">\(A_i\)</span> in increasing order<br />
7. <span class="math inline">\(\qquad\)</span> Flip an unbiased coin<br />
8. <span class="math inline">\(\qquad\)</span> <strong>If</strong> <span class="math inline">\(A_i\)</span> contains odd number of elements <strong>then</strong><br />
9. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\qquad\)</span> <span class="math inline">\(E \leftarrow\)</span> the element at the back of <span class="math inline">\(A\)</span><br />
10. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\qquad\)</span> delete <span class="math inline">\(E\)</span> from <span class="math inline">\(A\)</span><br />
11. <span class="math inline">\(\qquad\)</span> <strong>Else</strong><br />
12. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\qquad\)</span> <span class="math inline">\(E \leftarrow\)</span> null<br />
13. <span class="math inline">\(\qquad\)</span> <strong>If</strong> the coin turns out head <strong>then</strong><br />
14. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\qquad\)</span> Move odd index elements of <span class="math inline">\(A_i\)</span> to <span class="math inline">\(A_{ i + 1 }\)</span><br />
15. <span class="math inline">\(\qquad\)</span> <strong>Else</strong>:<br />
16. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\qquad\)</span> Move even index elements of <span class="math inline">\(A_i\)</span> to <span class="math inline">\(A_{i + 1}\)</span><br />
17. <span class="math inline">\(\qquad\)</span> Delete all elements in <span class="math inline">\(A_i\)</span><br />
18. <span class="math inline">\(\qquad\)</span> If <span class="math inline">\(E \neq\)</span> null <strong>then</strong><br />
19. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\qquad\)</span> Put <span class="math inline">\(E\)</span> back into <span class="math inline">\(A_i\)</span><br />
20. <span class="math inline">\(\qquad\)</span> <span class="math inline">\(i \leftarrow i + 1\)</span></p>
</blockquote>
<h2 id="analysis">Analysis</h2>
<h3 id="maintaining-the-invariant">Maintaining the Invariant</h3>
<blockquote>
<p><strong>Lemma.</strong> The invariant is maintained.</p>
</blockquote>
<p><strong>Proof.</strong> We prove this by induction. Initially, <span class="math inline">\(L = 0\)</span> and <span class="math inline">\(A_0\)</span> has capacity <span class="math inline">\(k\)</span>. If <span class="math inline">\(A_0\)</span> has not reaches its capacity, the invariant holds trivially.</p>
<p>Now, suppose that the invariant holds before the algorithm <em>COMPRESS</em>.</p>
<p>If <span class="math inline">\(L\)</span> is not increased and no new array is created by the algorithm, i.e., the <em>while</em> loop of the algorithm stops for <span class="math inline">\(i \le L\)</span>, then the invariant still holds.</p>
<p>If <span class="math inline">\(L\)</span> is increased and new arrays are created, then when the algorithm <em>COMPRESS</em> stops, <em>compactions</em> have been performed for all arrays except the one with highest index. Hence, $ 0 |A_j|  &lt; ^i k _{even}. $ Finally, when <em>while</em> loop stops, it holds that <span class="math inline">\(i = L\)</span>. The stopping condition implies that <span class="math inline">\(|A_L| &lt; \lceil \alpha^0 \cdot k \rceil_{even} = k\)</span>.</p>
<p><span class="math inline">\(\square\)</span></p>
<blockquote>
<p><strong>Question to ponder:</strong> Prove that at most one new array can be created by <em>COMPRESS</em> each time it is invoked.</p>
</blockquote>
<h3 id="bounding-the-number-of-compaction">Bounding the Number of Compaction</h3>
<blockquote>
<p><strong>Lemma.</strong> When the algorithms stops, for each <span class="math inline">\(i \in [L]\)</span>, the number of compaction performed at the array <span class="math inline">\(A_{L - i}\)</span> is bounded by <span class="math inline">\((4 / \alpha)^i\)</span>.</p>
</blockquote>
<p><strong>Proof.</strong> For each <span class="math inline">\(i \in [L]\)</span>, when a compaction is performed at <span class="math inline">\(A_{L - i}\)</span>, at least <span class="math inline">\(\lceil \alpha^i \cdot k \rceil_{even}\)</span> elements are removed from it. As each element in <span class="math inline">\(A_{L - i}\)</span> represents <span class="math inline">\(2^{L - i}\)</span> elements in the original stream, it holds that <span class="math display">\[
    m_{L - i} \le \frac{ n }{ 2^{L - i} \cdot \lceil \alpha^i \cdot k \rceil_{even} } \le \frac{ n }{ 2^{L - i} \cdot \alpha^i \cdot k  } 
\]</span></p>
<p><span class="math inline">\(\square\)</span></p>
<p>Finally, we discuss the estimation error of an element. For fixed <span class="math inline">\(n\)</span>, the number of compactions performed, as well as the order of the compactions performed are deterministic. Using the notations in the previous section, we have <span class="math display">\[
    \begin{aligned}
        \sum_{t \in [m] } c_t^2 
        &amp;= \sum_{i \in [L] } m_{L - i} \cdot \big( 2^{L - i} \big)^2 \\
        &amp;\le \sum_{i \in [L] } \frac{ n }{ 2^{L - i} \cdot \alpha^i \cdot k  }  \cdot \big( 2^{L - i} \big)^2 \\
        &amp;\le \sum_{i \in [L] } \frac{ n }{ \alpha^i \cdot k  }  \cdot \big( 2^{L - i} \big) \\
        &amp;= 2^L \cdot \frac{n}{k} \cdot \sum_{i \in [L] } \frac{ 1 }{ (2 \cdot \alpha)^i }.   
    \end{aligned}
\]</span></p>
<p>Using that <span class="math inline">\(2^{L - 1} \le \frac{n}{k}\)</span>, and that <span class="math display">\[
    \sum_{i \in [L] } \frac{ 1 }{ (2 \cdot \alpha)^i } 
    \le \sum_{i \ge 1 } \frac{ 1 }{ (2 \cdot \alpha)^i }
    = \frac{1}{2 \alpha} \cdot \frac{1}{1 - 1 / (2 \alpha) } = \frac{1}{ 2 \alpha - 1 }, 
\]</span> we see <span class="math display">\[
    \sum_{t \in [m] } c_t^2 \le 2 \cdot \left( \frac{n}{k} \right)^2 \cdot \frac{1}{2 \alpha - 1}.
\]</span></p>
<p>It follows that with probability at least <span class="math inline">\(1 - \delta\)</span>, it holds that <span class="math display">\[
    \begin{aligned}
        \left| \sum_{t \in [m] } X_t \right| 
        &amp;\le \sqrt{ 2 \cdot \left( \sum_{t \in [m] } c_t^2 \right) \cdot \ln \frac{2}{\delta } } \\
        &amp;\le \sqrt{ 2 \cdot 2 \cdot \left( \frac{n}{k} \right)^2 \cdot \frac{1}{2 \alpha - 1} \cdot \ln \frac{2}{\delta } } \\
        &amp;\le 2 \cdot \sqrt{ \left( \frac{n}{k} \right)^2 \cdot \frac{1}{2 \alpha - 1} \cdot \ln \frac{2}{\delta } } 
    \end{aligned}
\]</span></p>
<p>Setting <span class="math inline">\(k = \Big\lceil 2 / \epsilon \cdot \sqrt{ \frac{1}{2 \alpha - 1} \cdot \ln 2 / \delta } \Big\rceil_{even}\)</span>, this error is bounded by <span class="math inline">\(\epsilon \cdot n\)</span>.</p>
<h1 id="reference">Reference</h1>
<p>[1] <em>C. McDiarmid, “Concentration,” in Probabilistic Methods for Algorithmic Discrete Mathematics, M. Habib, C. McDiarmid, J. Ramirez-Alfonsin, and B. Reed, Eds. Berlin, Heidelberg: Springer Berlin Heidelberg, 1998, pp. 195–248.</em></p>
<p>[2] <em>Z. Karnin, K. Lang, and E. Liberty, “Optimal Quantile Approximation in Streams,” arXiv:1603.05346 [cs], Apr. 2016</em></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/62/">62</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">WOW</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">185</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WOW</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
